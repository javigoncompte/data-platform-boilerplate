bundle:
  name: {{ .input_src_name }}
variables:
  databricks_principal:
    description: Principal of Databricks Job owner
    default: ""

workspace:
  root_path: /Users/${workspace.current_user.userName}/.bundle/${bundle.name}/my-envs/${bundle.target}


include:
  # Resources folder contains ML artifact resources for the ML project that defines model and experiment
  # And workflows resources for the ML project including model training -> validation -> deployment,
  #- ./job.yml

#wheel for jobs
artifacts:
  {{ .input_src_name }}:
    type: whl
    build: bazelisk build {{ .input_src_name }} && mkdir dist && cp  ../../../../../bazel-bin/src/{{ .destination_directory }}/{{ .input_project_name }}_proj/{{ .input_src_name }}_src/{{ .input_src_name }}/{{ .input_src_name }}-${var.RELEASE_VERSION}-py3-none-any.whll dist/

# Deployment Target specific values for workspace
targets:
  dev:
    mode: development
    default: true
    variables:
      environment: test-env
    workspace:
      host: 
    artifacts:
      {{ .input_src_name }}:
        type: whl
  test:
    variables:
      environment: test-env
    workspace:
      host: 
  qa:
    git:
      branch: main
    variables:
      environment: qa-env
    workspace:
      host: 
  prod:
    mode: production
    git:
      branch: main
    variables:
      environment: prod-env
    workspace:
      host: 